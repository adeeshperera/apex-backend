QUICK RAILWAY DEPLOYMENT COMMANDS
===================================

GIT SETUP:
==========
git add -A
git commit -m "feat: prepare backend for Railway deployment"
git push origin main


RAILWAY CLI SETUP (Alternative to Web Dashboard):
==================================================

1. Install Railway CLI:
   npm install -g @railway/cli

2. Login to Railway:
   railway login

3. Link to your Railway project:
   railway link

4. Add environment variables:
   railway variables set NODE_ENV=production
   railway variables set MONGODB_URI="your_mongo_uri"
   railway variables set JWT_SECRET="your_jwt_secret"
   railway variables set CORS_ORIGIN="https://apex-client-side.vercel.app"

5. Deploy:
   railway deploy

6. View logs:
   railway logs

7. Get public URL:
   railway open


TESTING YOUR DEPLOYMENT:
========================

Health check:
curl https://your-railway-url/health

API health check:
curl https://your-railway-url/api/health

Full health response (with timestamp):
curl -s https://your-railway-url/api/health | json_pp

Test authentication endpoint:
curl https://your-railway-url/api/auth/status


ENVIRONMENT VARIABLES REQUIRED:
================================
NODE_ENV=production
MONGODB_URI=mongodb+srv://...
JWT_SECRET=your_secret_key
CORS_ORIGIN=https://apex-client-side.vercel.app


UPDATE FRONTEND (Vercel):
==========================
1. Add to environment variables on Vercel:
   REACT_APP_API_URL=https://your-railway-url

2. Or update your API configuration file (lib/api.ts)

3. Redeploy frontend on Vercel


MONITORING AND LOGS:
====================
Web Dashboard:
- Visit https://railway.app
- Select your project and service
- View "Deployments" for history
- Click deployment → "View Logs" for errors

CLI:
railway logs -f  (follow logs in real-time)


RESTART SERVICE:
================
Web Dashboard:
- Railway dashboard → Your Service → Redeploy

CLI:
railway deploy


DATABASE CONNECTION TROUBLESHOOTING:
====================================
If MongoDB connection fails:

1. Verify MONGODB_URI is correct
2. In MongoDB Atlas:
   - Go to Network Access
   - Add IP: 0.0.0.0/0 (or use Railway's static IP)
   - This allows connections from Railway

3. Test connection:
   - Check Railway logs for connection errors
   - Verify credentials in MONGODB_URI
   - Check if cluster is running

4. Alternative: Add MongoDB to Railway project:
   - Railway → New Project → Add Service
   - Search "MongoDB"
   - Add MongoDB and link to service
